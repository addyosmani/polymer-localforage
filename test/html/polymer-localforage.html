<!doctype html>
<html>
<head>
  <title>polymer-localforage</title>
  <script src="../../../platform/platform.js"></script>
  <script src="../../../tools/test/htmltest.js"></script>
  <script src="../../../tools/test/chai/chai.js"></script>
  <link rel="import" href="../../polymer-localforage.html">
</head>
<body>

  <polymer-localforageid="localforage" name="polymer-localforage-test" useRaw></polymer-localforage>
  
  <script>
    var assert = chai.assert;
    document.addEventListener('polymer-ready', function() {
      var s = document.querySelector('#localforage');
      var m = 'hello wold';
      var n = 'temp';
      window.localforage.setItem(s.name, m);
      s.load();
      assert.equal(s.value, m);
      s.value = 'goodbye';
      window.localforage.getItem(s.name, function(val){
        n = val;
        assert.equal(n, m);
        done();
      });
    });
  </script>
</body>
</html>
